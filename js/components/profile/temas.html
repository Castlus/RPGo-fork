<!-- Modal: Gerenciador de Temas -->
<!-- Injetado em <body> por temas.js -->
<div id="modalTemas" class="modal-overlay" style="display: none; align-items: flex-start; padding: 20px 0;">
    <div class="modal-box" style="width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; margin: auto;">
        <h2 style="margin-bottom: 4px;">&#127912; Temas</h2>
        <p style="font-size: 0.82rem; color: var(--text-sec); margin-bottom: 18px;">Escolha um tema ou crie o seu próprio.</p>

        <!-- Chips de tema (gerados por JS) -->
        <div id="temaChips" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;"></div>

        <!-- Personalizador -->
        <details id="temaDetails">
            <summary style="cursor: pointer; font-weight: 600; font-size: 0.9rem; color: var(--text-sec); padding: 8px 0; list-style: none; display: flex; align-items: center; gap: 6px;">
                <i class="fas fa-pen"></i> Criar tema personalizado
            </summary>

            <!-- Preview ao vivo -->
            <div id="temaPreview" style="display:flex;border-radius:8px;overflow:hidden;height:115px;margin:12px 0 4px;border:1px solid #ccc;cursor:default;">
                <!-- Sidebar mini -->
                <div id="pvSidebar" style="width:36%;padding:8px 7px;display:flex;flex-direction:column;gap:3px;">
                    <div id="pvName" style="font-weight:700;font-size:10px;">Personagem</div>
                    <div id="pvLevel" style="font-size:8px;margin-bottom:2px;">Nv. 10 &bull; Pirata</div>
                    <div id="pvBarBg" style="height:4px;border-radius:3px;overflow:hidden;margin-bottom:3px;">
                        <div style="background:#e74c3c;width:70%;height:100%;border-radius:3px;"></div>
                    </div>
                    <div style="display:flex;gap:3px;">
                        <div id="pvAttr" style="flex:1;border-radius:4px;padding:3px 2px;text-align:center;">
                            <div id="pvAttrLabel" style="font-size:6px;letter-spacing:.5px;">FOR</div>
                            <div id="pvAttrVal" style="font-weight:700;font-size:12px;">18</div>
                        </div>
                        <div id="pvAttr2" style="flex:1;border-radius:4px;padding:3px 2px;text-align:center;">
                            <div id="pvAttrLabel2" style="font-size:6px;letter-spacing:.5px;">DES</div>
                            <div id="pvAttrVal2" style="font-weight:700;font-size:12px;">14</div>
                        </div>
                    </div>
                </div>
                <!-- Main content mini -->
                <div id="pvPage" style="flex:1;padding:7px;display:flex;flex-direction:column;gap:4px;">
                    <div style="display:flex;gap:4px;margin-bottom:1px;">
                        <div id="pvTab" style="font-size:8px;font-weight:600;padding:2px 6px;border-radius:10px;">A&ccedil;&otilde;es</div>
                        <div id="pvTabInactive" style="font-size:8px;padding:2px 6px;">Invent&aacute;rio</div>
                    </div>
                    <div id="pvCard" style="border-radius:5px;padding:5px 7px;flex:1;">
                        <div id="pvCardTitle" style="font-weight:700;font-size:9px;margin-bottom:2px;">T&eacute;cnica Especial</div>
                        <div id="pvCardDesc" style="font-size:7px;line-height:1.4;">Descri&ccedil;&atilde;o da a&ccedil;&atilde;o do personagem...</div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 14px;">
                <div>
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Destaque</label>
                    <input type="color" id="cpPrimary" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div>
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Fundo da Página</label>
                    <input type="color" id="cpBgPage" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div>
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Fundo dos Cards</label>
                    <input type="color" id="cpBgCard" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div>
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Fundo de Inputs</label>
                    <input type="color" id="cpBgSurface" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div>
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Texto Principal</label>
                    <input type="color" id="cpTextMain" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div>
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Texto Secundário</label>
                    <input type="color" id="cpTextSec" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div style="grid-column: 1 / -1;">
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Bordas</label>
                    <input type="color" id="cpBorder" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                </div>
                <div style="grid-column: 1 / -1; margin-top: 6px;">
                    <div style="font-size: 0.7rem; font-weight: 700; color: var(--text-sec); text-transform: uppercase; letter-spacing: 1px; border-top: 1px solid var(--border); padding-top: 10px; margin-bottom: 8px;">Sidebar — independente do conteúdo</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                        <div>
                            <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Fundo</label>
                            <input type="color" id="cpBgSidebar" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                        </div>
                        <div>
                            <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Texto Principal</label>
                            <input type="color" id="cpSidebarTextMain" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                        </div>
                        <div>
                            <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Texto Secundário</label>
                            <input type="color" id="cpSidebarTextSec" style="width: 100%; height: 36px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; padding: 2px;">
                        </div>
                    </div>
                </div>
                <div style="grid-column: 1 / -1;">
                    <label style="font-size: 0.75rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 4px;">Nome do tema</label>
                    <input type="text" id="cpNome" placeholder="Ex: Meu Tema Roxo" maxlength="24"
                        style="width: 100%; padding: 8px 10px; border-radius: 6px; border: 1px solid var(--border);
                               background: var(--bg-surface); color: var(--text-main); font-size: 0.9rem;">
                </div>
            </div>
            <button id="btnSalvarCustom"
                style="margin-top: 14px; width: 100%; background: var(--primary); color: white;
                       border: none; padding: 10px; border-radius: 8px; font-weight: 700; cursor: pointer;">
                <i class="fas fa-save"></i> Salvar como Tema
            </button>
        </details>

        <div style="margin-top: 20px; text-align: right;">
            <button id="btnFecharTemas"
                style="background: var(--bg-surface); color: var(--text-main); border: none;
                       padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                Fechar
            </button>
        </div>
    </div>
</div>
